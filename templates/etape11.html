<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>√âtape 11 - SET</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
    <div class="card">
        <div class="card-header bg-success text-white">
            <h4>√âtape 11: Confirmation finale</h4>
        </div>
        <div class="card-body text-center">
            <div class="alert alert-success">
                <h1>üéâ Transaction SET R√©ussie!</h1>
            </div>
            
            <div class="mb-4">
                <h5>ID Transaction: {{ transaction_id }}</h5>
                <p>Le protocole SET a √©t√© ex√©cut√© avec succ√®s.</p>
            </div>
            
            <div class="card mb-4">
                <div class="card-header">R√©capitulatif</div>
                <div class="card-body text-start">
                    <ul>
                        <li>‚úÖ √âtape 1: Demande certificat</li>
                        <li>‚úÖ √âtape 2: Certificat √©mis</li>
                        <li>‚úÖ √âtape 3: Cr√©ation op√©rateur SET</li>
                        <li>‚úÖ √âtape 4: Envoi √† la banque</li>
                        <li>‚úÖ √âtape 5: V√©rifications</li>
                        <li>‚úÖ √âtape 7: Demande d'achat</li>
                        <li>‚úÖ √âtape 8: Achat 2 phases</li>
                        <li>‚úÖ √âtape 11: Confirmation</li>
                    </ul>
                </div>
            </div>
            
            <button class="btn btn-primary mb-3" onclick="confirmer()">
                Obtenir confirmation finale
            </button>
            
            <div id="confirmation" class="code-box p-3 bg-light mb-3" style="min-height: 100px;">
                <!-- La confirmation appara√Ætra ici -->
            </div>
            
            <div class="d-flex justify-content-between">
                <a href="/etape8" class="btn btn-secondary">‚Üê √âtape 8</a>
                <a href="/" class="btn btn-outline-primary">Retour √† l'accueil</a>
            </div>
        </div>
    </div>
    
    <script>
    function confirmer() {
        fetch('/api/confirmer', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' }
        })
        .then(r => r.json())
        .then(data => {
            document.getElementById('confirmation').innerHTML = 
                `<strong>‚úÖ Confirmation re√ßue</strong><br><br>
                 <strong>Transaction:</strong> ${data.confirmation.transaction_id}<br>
                 <strong>Statut:</strong> ${data.confirmation.status}<br>
                 <strong>Date:</strong> ${data.confirmation.date}<br>
                 <strong>Message:</strong> ${data.confirmation.message}`;
        });
    }
    </script>
</body>
</html>